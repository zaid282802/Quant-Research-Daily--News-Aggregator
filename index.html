<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark">
    <meta name="author" content="Zaid Annigeri">
    <meta name="copyright" content="Copyright 2025-2026 Zaid Annigeri. All rights reserved.">
    <title>Quant Research Daily | Financial Markets Intelligence</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body style="background:#0d1117;color:#e6edf3;">
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <h1 class="logo">QRD</h1>
                    <span class="logo-text">Quant Research Daily</span>
                </div>
                <div class="header-actions">
                    <span class="last-updated" id="lastUpdated">Last updated: --</span>
                    <button class="btn btn-refresh" id="refreshBtn" onclick="fetchAllNews()">
                        <svg class="refresh-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                        </svg>
                        Refresh
                    </button>
                    <a href="dashboard.html" class="btn" style="background: var(--accent-purple); border-color: var(--accent-purple);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3v18h18M9 17V9m4 8V5m4 12v-6"/>
                        </svg>
                        Dashboard
                    </a>
                    <a href="archive.html" class="btn btn-archive">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 8v13H3V8M1 3h22v5H1zM10 12h4"/>
                        </svg>
                        Archive
                    </a>
                    <a href="calendar.html" class="btn" style="background: var(--accent-green); border-color: var(--accent-green);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
                        </svg>
                        Calendar
                    </a>
                    <a href="cot.html" class="btn" style="background: var(--accent-blue); border-color: var(--accent-blue);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 20V10M12 20V4M6 20v-6"/>
                        </svg>
                        COT
                    </a>
                    <a href="papers.html" class="btn" style="background: var(--cat-academic); border-color: var(--cat-academic); color: #000;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                        Papers
                    </a>
                    <a href="correlations.html" class="btn" style="background: var(--accent-orange); border-color: var(--accent-orange);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                        </svg>
                        Correlations
                    </a>
                </div>
            </div>
        </header>

        <!-- Market Overview Bar -->
        <div class="market-bar">
            <div class="market-bar-content" id="marketBar">
                <div class="market-item loading">
                    <span class="market-label">Loading market data...</span>
                </div>
            </div>
        </div>

        <!-- Event Countdown Bar -->
        <div class="countdown-bar" id="countdownBar">
            <div class="countdown-items" id="countdownItems">
                <span class="countdown-loading">Loading event countdown...</span>
            </div>
            <a href="calendar.html" class="countdown-link">Full Calendar &rarr;</a>
        </div>

        <!-- Navigation Tabs -->
        <nav class="category-nav">
            <button class="category-tab active" data-category="all">All News</button>
            <button class="category-tab" data-category="volatility">Volatility & Derivatives</button>
            <button class="category-tab" data-category="central-banks">Central Banks</button>
            <button class="category-tab" data-category="systematic">Systematic Trading</button>
            <button class="category-tab" data-category="factors">Factor Investing</button>
            <button class="category-tab" data-category="fixed-income">Fixed Income</button>
            <button class="category-tab" data-category="macro">Macro & Data</button>
            <button class="category-tab" data-category="commodities">Commodities & FX</button>
            <button class="category-tab" data-category="academic">Academic Research</button>
            <button class="category-tab" data-category="energy">Energy</button>
        </nav>

        <!-- Hero Breaking News Section -->
        <section class="hero-news-section" id="heroNews">
            <div class="hero-container">
                <div class="hero-badge">
                    <span class="pulse-dot"></span>
                    BREAKING
                </div>
                <div class="hero-content" id="heroContent">
                    <div class="hero-loading">
                        <span>Loading breaking news...</span>
                    </div>
                </div>
                <div class="hero-navigation">
                    <button class="hero-nav-btn" onclick="prevHeroNews()" aria-label="Previous news">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <div class="hero-dots" id="heroDots"></div>
                    <button class="hero-nav-btn" onclick="nextHeroNews()" aria-label="Next news">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Priority News Section -->
            <section class="news-section priority-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="priority-badge">HIGH PRIORITY</span>
                        Critical Market Updates
                    </h2>
                </div>
                <div class="news-grid priority-grid" id="priorityNews">
                    <div class="loading-placeholder">
                        <div class="loading-spinner"></div>
                        <p>Fetching priority news...</p>
                    </div>
                </div>
            </section>

            <!-- Main News Feed -->
            <section class="news-section">
                <div class="section-header">
                    <h2 class="section-title">Latest News</h2>
                    <div class="section-filters">
                        <select id="sourceFilter" class="filter-select">
                            <option value="all">All Sources</option>
                            <option value="wsj">WSJ</option>
                            <option value="ft">Financial Times</option>
                            <option value="bloomberg">Bloomberg</option>
                            <option value="reuters">Reuters</option>
                            <option value="fed">Federal Reserve</option>
                            <option value="ecb">ECB</option>
                            <option value="alpha architect">Alpha Architect</option>
                            <option value="quantocracy">Quantocracy</option>
                            <option value="cnbc">CNBC</option>
                            <option value="marketwatch">MarketWatch</option>
                            <option value="arxiv">arXiv</option>
                            <option value="aqr">AQR</option>
                            <option value="quantpedia">Quantpedia</option>
                            <option value="two sigma">Two Sigma</option>
                            <option value="nber">NBER</option>
                            <option value="imf">IMF</option>
                            <option value="bis">BIS</option>
                            <option value="eia">EIA</option>
                        </select>
                        <select id="timeFilter" class="filter-select">
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                        </select>
                    </div>
                </div>
                <div class="news-grid" id="mainNews">
                    <div class="loading-placeholder">
                        <div class="loading-spinner"></div>
                        <p>Loading news feed...</p>
                    </div>
                </div>
            </section>

            <!-- Research & Analysis -->
            <section class="news-section research-section">
                <div class="section-header">
                    <h2 class="section-title">Research & Analysis</h2>
                </div>
                <div class="research-grid" id="researchNews">
                    <div class="loading-placeholder">
                        <div class="loading-spinner"></div>
                        <p>Loading research articles...</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Economic Calendar -->
            <div class="sidebar-widget">
                <h3 class="widget-title">Economic Calendar</h3>
                <div class="calendar-events" id="economicCalendar">
                    <div class="loading-placeholder small">
                        <div class="loading-spinner small"></div>
                    </div>
                </div>
            </div>

            <!-- VIX & Volatility Widget -->
            <div class="sidebar-widget">
                <h3 class="widget-title">Volatility Monitor</h3>
                <div class="volatility-widget" id="volatilityWidget">
                    <div class="loading-placeholder small">
                        <div class="loading-spinner small"></div>
                    </div>
                </div>
            </div>

            <!-- Central Bank Watch -->
            <div class="sidebar-widget">
                <h3 class="widget-title">Central Bank Watch</h3>
                <div class="central-bank-widget" id="centralBankWidget">
                    <div class="loading-placeholder small">
                        <div class="loading-spinner small"></div>
                    </div>
                </div>
            </div>

            <!-- Research Ideas Widget -->
            <div class="sidebar-widget">
                <h3 class="widget-title">üí° Research Ideas</h3>
                <div class="research-ideas-widget" id="researchIdeasWidget">
                    <div class="empty-ideas">
                        <p>Click üí° on any news card to save research ideas</p>
                    </div>
                </div>
            </div>

            <!-- Recent Papers Widget -->
            <div class="sidebar-widget">
                <h3 class="widget-title">üìÑ Recent Papers</h3>
                <div class="recent-papers-widget" id="recentPapersWidget">
                    <div class="empty-ideas"><p>Loading arXiv papers...</p></div>
                </div>
                <a href="papers.html" class="widget-view-all">View All Papers &rarr;</a>
            </div>

            <!-- Correlation Alert Widget -->
            <div class="sidebar-widget">
                <h3 class="widget-title">üìä Correlation Monitor</h3>
                <div class="correlation-alert-widget" id="corrAlertWidget">
                    <div class="corr-alert-status">
                        <span class="corr-indicator normal" id="corrIndicator">NORMAL</span>
                        <span class="corr-detail" id="corrDetail">Checking cross-asset correlations...</span>
                    </div>
                </div>
                <a href="correlations.html" class="widget-view-all">Full Heatmap &rarr;</a>
            </div>

            <!-- Quick Links -->
            <div class="sidebar-widget">
                <h3 class="widget-title">Quick Links</h3>
                <div class="quick-links">
                    <a href="https://fred.stlouisfed.org/" target="_blank" class="quick-link">üìä FRED Data</a>
                    <a href="https://www.cmegroup.com/markets/interest-rates/cme-fedwatch-tool.html" target="_blank" class="quick-link">üìà CME FedWatch</a>
                    <a href="https://www.cboe.com/tradable_products/vix/" target="_blank" class="quick-link">üìâ CBOE VIX</a>
                    <a href="https://alphaarchitect.com/blog/" target="_blank" class="quick-link">üî¨ Alpha Architect</a>
                    <a href="https://www.aqr.com/Insights/Research" target="_blank" class="quick-link">üìö AQR Research</a>
                    <a href="https://papers.ssrn.com/sol3/JELJOUR_Results.cfm?form_name=journalbrowse&journal_id=1927431" target="_blank" class="quick-link">üìù SSRN Finance</a>
                    <a href="https://quantocracy.com/" target="_blank" class="quick-link">ü§ñ Quantocracy</a>
                    <a href="research-ideas.html" class="quick-link">üí° My Research Ideas</a>
                    <a href="dashboard.html" class="quick-link" style="color: var(--accent-purple);">üìä Analytics Dashboard</a>
                </div>
            </div>

            <!-- Factor Performance Widget -->
            <div class="sidebar-widget">
                <h3 class="widget-title">üìà Factor Performance (MTD)</h3>
                <div id="factorWidget">
                    <div class="loading-placeholder small">
                        <div class="loading-spinner small"></div>
                    </div>
                </div>
            </div>

            <!-- Keyboard Shortcuts -->
            <div class="sidebar-widget">
                <h3 class="widget-title">‚å®Ô∏è Shortcuts</h3>
                <div class="shortcuts-list">
                    <div class="shortcut-item"><kbd>R</kbd> Refresh news</div>
                    <div class="shortcut-item"><kbd>1-9</kbd> Filter by category</div>
                </div>
            </div>
        </aside>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>Quant Research Daily - Curated financial news for quantitative researchers</p>
                <p class="disclaimer">Data aggregated from public RSS feeds and APIs. Not financial advice.</p>
            </div>
        </footer>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-message"></span>
    </div>

    <!-- Hot News Floating Panel -->
    <aside class="hot-news-panel" id="hotNewsPanel">
        <div class="hot-news-header">
            <h4>
                <span class="hot-icon">&#128293;</span>
                Critical Alerts
            </h4>
            <button class="hot-news-toggle" onclick="toggleHotNewsPanel()" aria-label="Minimize panel">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </button>
        </div>
        <div class="hot-news-body" id="hotNewsBody">
            <div class="hot-news-loading">Scanning for critical alerts...</div>
        </div>
        <div class="hot-news-footer">
            <select id="hotNewsFilter" onchange="filterHotNews(this.value)">
                <option value="all">All Categories</option>
                <option value="volatility">Volatility</option>
                <option value="central-banks">Central Banks</option>
                <option value="macro">Macro</option>
                <option value="markets">Markets</option>
            </select>
            <span class="hot-news-count" id="hotNewsCount">0 alerts</span>
        </div>
    </aside>

    <!-- Core Scripts -->
    <script src="storage.js"></script>
    <script src="volatility.js"></script>
    <script src="factors.js"></script>
    <script src="app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        // Register Service Worker for offline support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }

        // === Event Countdown Widget ===
        (function initCountdown() {
            const FOMC = [
                new Date(2026,0,28), new Date(2026,2,18), new Date(2026,4,6),
                new Date(2026,5,17), new Date(2026,6,29), new Date(2026,8,16),
                new Date(2026,10,4), new Date(2026,11,16)
            ];
            const OPEX = [
                new Date(2026,0,16), new Date(2026,1,20), new Date(2026,2,20),
                new Date(2026,3,17), new Date(2026,4,15), new Date(2026,5,19),
                new Date(2026,6,17), new Date(2026,7,21), new Date(2026,8,18),
                new Date(2026,9,16), new Date(2026,10,20), new Date(2026,11,18)
            ];
            function getNextCPI() {
                const now = new Date(); let d = new Date(now.getFullYear(), now.getMonth(), 12);
                if (d <= now) d = new Date(now.getFullYear(), now.getMonth()+1, 12);
                return d;
            }
            function getNextNFP() {
                const now = new Date();
                for (let m = now.getMonth(); m < now.getMonth()+3; m++) {
                    const first = new Date(now.getFullYear(), m, 1);
                    let day = first.getDay(); let fri = day <= 5 ? (5 - day + 1) : (5 + 7 - day + 1);
                    const d = new Date(now.getFullYear(), m, fri);
                    if (d > now) return d;
                }
                return null;
            }
            function fmt(ms) {
                const d = Math.floor(ms/86400000), h = Math.floor((ms%86400000)/3600000);
                return d > 0 ? `${d}d ${h}h` : `${h}h`;
            }
            function update() {
                const now = new Date();
                const events = [
                    ...FOMC.filter(d=>d>now).slice(0,1).map(d=>({name:'FOMC',date:d,cls:'critical'})),
                    ...OPEX.filter(d=>d>now).slice(0,1).map(d=>({name:'OpEx',date:d,cls:'medium'})),
                    {name:'CPI',date:getNextCPI(),cls:'high'},
                    {name:'NFP',date:getNextNFP(),cls:'high'}
                ].filter(e=>e.date).sort((a,b)=>a.date-b.date);
                const el = document.getElementById('countdownItems');
                if (!el) return;
                el.innerHTML = events.slice(0,4).map(e =>
                    `<div class="countdown-item ${e.cls}"><span class="cd-label">${e.name}</span><span class="cd-time">${fmt(e.date-now)}</span><span class="cd-date">${e.date.toLocaleDateString('en-US',{month:'short',day:'numeric'})}</span></div>`
                ).join('');
            }
            update(); setInterval(update, 60000);
        })();

        // === Recent Papers Widget (reads from papers.js localStorage cache) ===
        (function initRecentPapers() {
            const el = document.getElementById('recentPapersWidget');
            if (!el) return;
            try {
                const cached = localStorage.getItem('qrd_papers_cache');
                if (cached) {
                    const data = JSON.parse(cached);
                    const papers = (data.papers || []).slice(0, 3);
                    if (papers.length) {
                        el.innerHTML = papers.map(p =>
                            `<div class="recent-paper-item"><a href="${p.link || '#'}" target="_blank" class="rp-title">${p.title ? p.title.slice(0,80) : 'Untitled'}${p.title && p.title.length>80?'...':''}</a><span class="rp-meta">${p.subcategory || 'q-fin'} ¬∑ ${p.pubDate ? new Date(p.pubDate).toLocaleDateString() : ''}</span></div>`
                        ).join('');
                        return;
                    }
                }
            } catch(e) {}
            el.innerHTML = '<div class="empty-ideas"><p>Visit <a href="papers.html">Papers</a> to load arXiv feed</p></div>';
        })();

        // === Correlation Alert Widget ===
        (function initCorrAlert() {
            const indicator = document.getElementById('corrIndicator');
            const detail = document.getElementById('corrDetail');
            if (!indicator || !detail) return;
            // Check if correlations page has cached any alerts
            try {
                const cached = localStorage.getItem('qrd_corr_alerts');
                if (cached) {
                    const alerts = JSON.parse(cached);
                    if (alerts.length > 0) {
                        indicator.className = 'corr-indicator alert';
                        indicator.textContent = 'REGIME SHIFT';
                        detail.textContent = alerts[0].message || `${alerts.length} regime alert(s) detected`;
                        return;
                    }
                }
            } catch(e) {}
            indicator.className = 'corr-indicator normal';
            indicator.textContent = 'NORMAL';
            detail.textContent = 'Cross-asset correlations within historical norms';
        })();

        // Initialize enhanced features after main app loads
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize factor widget
            setTimeout(() => {
                if (typeof initFactorTracking === 'function') {
                    initFactorTracking();
                }
            }, 2000);

            // Initialize enhanced volatility tracking
            setTimeout(() => {
                if (typeof initVolatilityTracking === 'function') {
                    initVolatilityTracking();
                }
            }, 3000);
        });
    </script>
<footer style="text-align:center;padding:18px 0 12px;border-top:1px solid rgba(255,255,255,0.08);margin-top:40px;color:#888;font-size:0.82rem;letter-spacing:0.3px;">
    &copy; 2025‚Äì2026 <strong style="color:#c9d1d9;">Zaid Annigeri</strong> &nbsp;|&nbsp; Quant Research Daily (QRD) &nbsp;|&nbsp;
    <a href="https://github.com/zaid282802/Quant-Research-Daily--News-Aggregator" target="_blank" style="color:#58a6ff;text-decoration:none;">GitHub</a>
</footer>
</body>
</html>
